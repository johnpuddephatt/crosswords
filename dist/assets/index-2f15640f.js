var De=Object.defineProperty;var Ue=(t,e,n)=>e in t?De(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var L=(t,e,n)=>(Ue(t,typeof e!="symbol"?e+"":e,n),n),re=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var u=(t,e,n)=>(re(t,e,"read from private field"),n?n.call(t):e.get(t)),h=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},S=(t,e,n,r)=>(re(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var C=(t,e,n)=>(re(t,e,"access private method"),n);function Nt(){import.meta.url,import("_").catch(()=>1);async function*t(){}}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function x(t,e){t.classList.add(e)}function Ce(t,e){e.forEach(n=>{t.classList.add(n)})}function a(t,e){if(!t)throw new Error(e||"Assertion failed")}const je=(t,e=document)=>e.getElementById(t),Pe=(t,e=document)=>e.getElementsByClassName(t);function qe(t){return t?t[0]:null}function Be(t,e,n){let r=t;if(t&&e!=null&&n){let s=parseInt(e,10);s<0&&(s=t.length+s),s>=0&&n&&t.length>s&&(r="".concat(t.slice(0,s)).concat(n).concat(t.slice(s+n.length)))}return r}const Ve=t=>{const e="id_Z?7kQ;x8j!",n={};return r=>(r[e]||(r[e]=Math.random().toString(16).slice(2)),r[e]in n||(n[r[e]]=t(r),b("memoize:caching id ".concat(r[e]))),n[r[e]])};function V(t,e){t.classList.remove(e)}function U(t,e,n){let r=t==null?"":t;return r=r.padEnd(e+1," "),Be(r,e,n)}const b=t=>{},Fe=()=>{const t={},e=t.hasOwnProperty;return{publish:(n,r)=>{e.call(t,n)&&t[n].forEach(s=>{s(r!==void 0?r:{})})},subscribe:(n,r)=>{e.call(t,n)||(t[n]=[]);const s=t[n].push(r)-1;return{remove:()=>{delete t[n][s]}}}}};function Ke(t){const e={};for(const n of t)e[n]=n;return Object.freeze(e)}const ge=/^(.*?)\.(.*)\((.*?)\)$/,fe=/^(\d+[ad]?)(,(\d+[ad]?.*))*$/,We=/^\s*(.*?)\s*$/,we=/^(\d+)(([,-])(\d+.*))*$/,Ze="<NumberText>.<ClueText>(<AnswerText>)";function _e(t){const e={x:1,y:1,clue:"1. Clue (1)"},n={answer:"",solution:"",revealed:""},r=Object.keys(e),s=Object.keys(n),o=Object.keys(t);for(const l of r)if(!o.includes(l))throw new Error("'cdClue.".concat(l,"' is missing"));for(const l of r)if(typeof e[l]!=typeof t[l])throw new Error("'cdClue.".concat(l," (").concat(t[l],")' must be a ").concat(typeof e[l]));for(const l of s)if(o.includes(l)&&typeof n[l]!=typeof t[l])throw new Error("'cdClue.".concat(l," (").concat(t[l],")' must be a ").concat(typeof n[l]));const i=new Set(o);for(const l of r)i.delete(l);for(const l of s)i.delete(l);if(i.size>0)throw new Error("'cdClue' has unexpected properties <".concat([...i].join(","),">"));if(!ge.test(t.clue))throw new Error("Clue '".concat(t.clue,"' does not match the required pattern '").concat(Ze,"'"))}function ze(t,e){if(t===void 0||e===void 0)throw new Error("'cdClue' and 'isAcrossClue' are required");if(t===null)throw new Error("'cdClue' can't be null");if(e===null)throw new Error("'isAcrossClue' can't be null");if(typeof e!="boolean")throw new Error("'isAcrossClue' must be a boolean (true,false)")}function Je(t,e){let n=t,r=[];for(;fe.test(n);){const[,s,,o]=fe.exec(n);r.push(s),n=o}if(n!=null)throw new Error("'".concat(e.clue,"' Error in <numberText> near <").concat(n,">"));return r}function Ye(t){function e(s){return s.endsWith("a")?"across":s.endsWith("d")?"down":null}let n=t.slice(1),r=[];return n&&(r=n.map(s=>({number:parseInt(s,10),direction:e(s)}))),r}function Qe(t,e){let n=[],r=t;for(;we.test(r);){const[,s,,o,i]=we.exec(r);n.push({length:parseInt(s,10),terminator:o!=null?o:""}),r=i}if(r!=null)throw new Error("'".concat(e.clue,"' Error in <answerText> near <").concat(r,">"));return n}function Xe(t,e){ze(t,e),_e(t);const n=t.x-1,r=t.y-1,s=e,o=[],i=t.solution?t.solution.toUpperCase().replaceAll(/[^A-Z]/g,""):void 0,l=t.revealed?t.revealed.toUpperCase():void 0,[,d,w,p]=ge.exec(t.clue),g=Je(d,t),f=Ye(g),c=qe(g),T=parseInt(c,10),ne=T.toString(),Re=c.endsWith("a")||c.endsWith("d")?c:c+(e?"a":"d"),[,Ne]=We.exec(w),ae=Qe(p,t),H=ae.reduce((Me,Ge)=>Me+Ge.length,0),He=t.answer?t.answer.toUpperCase().replaceAll(/[^ A-Z]/g," ").padEnd(H):"".padEnd(H),he="(".concat(p,")");if(i&&i.length!==H)throw new Error("Length of clue solution '".concat(i,"' does not match the answer length '").concat(he,"'"));if(l&&l.length!==H)throw new Error("Length of clue revealed characters '".concat(l,"' does not match the answer length: ").concat(H));return{answer:He,answerLength:H,answerLengthText:he,answerSegments:ae,cells:o,clueLabel:ne,clueText:Ne,code:Re,connectedDirectedClues:f,isAcross:s,number:T,revealed:l,solution:i,x:n,y:r}}function et(t){const{width:e}=t,{height:n}=t,r=new Array(e);for(let s=0;s<e;s+=1){r[s]=new Array(n);for(let o=0;o<n;o+=1)r[s][o]={model:t,x:s,y:o}}return r}function tt(t,e){let n=e;for(const r of t){if(n<=r.length)return[r,n];n-=r.length}return null}function nt(t){let e={width:t.width,height:t.height,acrossClues:[],downClues:[],cells:[]};if(e.width===void 0||e.width===null||e.width<0||e.height===void 0||e.height===null||e.height<0)throw new Error("The crossword bounds are invalid.");return e}function rt(t,e,n){if(t.x<0||t.x>=e.width||t.y<0||t.y>=e.height)throw new Error("Clue ".concat(t.code," doesn't start in the bounds."));if(n){if(t.x+t.answerLength>e.width)throw new Error("Clue ".concat(t.code," exceeds horizontal bounds."))}else if(t.y+t.answerLength>e.height)throw new Error("Clue ".concat(t.code," exceeds vertical bounds."))}function st(t,e,n){!n&&t.acrossClue&&(t.acrossClue.answer=U(t.acrossClue.answer,t.acrossClueLetterIndex,e)),n&&t.downClue&&(t.downClue.answer=U(t.downClue.answer,t.downClueLetterIndex,e))}function ot(t){if(!t)throw new Error("The model must be initialised with a JSON crossword definition.");let e=nt(t);e.cells=et(e);const n=t.acrossClues.concat(t.downClues);for(let s=0;s<n.length;s+=1){const o=n[s],i=s<t.acrossClues.length,l=Xe(o,i);e[i?"acrossClues":"downClues"].push(l),rt(l,e,i);let{x:d,y:w}=l;const p=" ",g=" ";for(let f=0;f<l.answerLength;f+=1){const c=e.cells[d][w];c.light=!0,c[i?"acrossClue":"downClue"]=l,c[i?"acrossClueLetterIndex":"downClueLetterIndex"]=f,l.cells.push(c);const[T,ne]=tt(l.answerSegments,f);if(ne===T.length-1&&T.terminator!==""&&(c[l.isAcross?"acrossTerminator":"downTerminator"]=T.terminator),o.answer){if(c.answer&&c.answer!==p&&c.answer!==l.answer[f])throw new Error("Clue ".concat(l.code," answer at (").concat(d+1,",").concat(w+1,") [").concat(l.answer,"[").concat(f+1,"],").concat(l.answer[f],"] is not coherent with previous clue (").concat(c.acrossClue.code,") answer [").concat(c.acrossClue.answer,",").concat(c.answer,"]."));c.answer=l.answer[f],st(c,c.answer,i)}else c.answer||(c.answer=p);if(o.solution){if(c.solution&&c.solution!==g&&c.solution!==l.solution[f])throw new Error("Clue ".concat(l.code," solution at (").concat(d+1,",").concat(w+1,") [").concat(l.solution,"[").concat(f+1,"],").concat(l.solution[f],"] is not coherent with previous clue (").concat(c.acrossClue.code,") solution [").concat(c.acrossClue.solution,",").concat(c.solution,"]."));c.solution=l.solution[f]}else c.solution=g;if(f===0){if(c.clueLabel&&c.clueLabel!==l.number)throw new Error("Clue ".concat(l.code," has a label which is inconsistent with another clue (").concat(c.acrossClue.code,")."));c.clueLabel=l.number}i?d+=1:w+=1}}return e.acrossClues.concat(e.downClues).forEach(s=>{if(!s.connectedDirectedClues)return;s.connectedClues=s.connectedDirectedClues.map(l=>l.direction==="across"?e.acrossClues.find(d=>d.number===l.number):l.direction==="down"?e.downClues.find(d=>d.number===l.number):e.acrossClues.find(d=>d.number===l.number)||e.downClues.find(d=>d.number===l.number)),s.answerLengthText="(".concat([s.answerLengthText].concat(s.connectedClues.map(l=>l.answerLengthText)).join(",").replace(/[()]/g,""),")");let o=0;const i=[s].concat(s.connectedClues);i.forEach(l=>{o>0&&(l.previousClueSegment=i[o-1]),o<i.length-1&&(l.nextClueSegment=i[o+1]),[l.parentClue]=i,o+=1}),s.clueLabel="".concat([s.number].concat(s.connectedClues.map(l=>l.number)).join(","),"."),s.connectedClues.forEach(l=>{l.answerLengthText=null,l.isConnectedClue=!0})}),e}var $;class lt{constructor(){h(this,$,void 0);S(this,$,[])}add(e,n){u(this,$).push({cell:e,cellElement:n})}getCellElement(e){const n=u(this,$).find(r=>r.cell===e);return n?n.cellElement:null}getCell(e){const n=u(this,$).find(r=>r.cellElement===e);return n?n.cell:null}removeCrosswordCells(e){S(this,$,u(this,$).filter(n=>n.cell.crossword!==e))}}$=new WeakMap;const M=t=>{t&&t.classList.add("hidden")},Ee=t=>{t&&t.classList.remove("hidden")},me=Ve(t=>t.filter(e=>!e.previousClueSegment));function ie(t,e){a(t,"<controller> is null or undefined"),a(e,"<cell> is null or undefined");const n=e.acrossClue?e.acrossClue:e.downClue,r=e.acrossClue?e.acrossClueLetterIndex:e.downClueLetterIndex,s=n.solution[r];ue(t,e,s,!1),Ee(t.revealedElement(e)),M(t.incorrectElement(e))}function it(t,e){a(t,"<controller> is null or undefined"),a(e,"<clue> is null or undefined"),b("revealClue: '".concat(e.code,"'")),(e.parentClue?[e.parentClue].concat(e.parentClue.connectedClues):[e]).forEach(r=>{r.cells.forEach(s=>{ie(t,s)})})}function ut(t){a(t,"<controller> is null or undefined"),t.crosswordModel.cells.forEach(e=>{e.filter(n=>n.light).forEach(n=>{ie(t,n)})})}const m=Ke(["Correct","Incorrect","Incomplete"]);function te(t,e,n=!0){a(t,"<controller> is null or undefined"),a(e,"<cell> is null or undefined");const[r,s]=e.acrossClue?[e.acrossClue,e.acrossClueLetterIndex]:[e.downClue,e.downClueLetterIndex],o=r.answer[s],i=r.solution[s],l=o===i?m.Correct:o===" "||o===void 0?m.Incomplete:m.Incorrect;return l===m.Incorrect&&n&&Ee(t.incorrectElement(e)),l}function ct(t,e,n=!0){a(t,"<controller> is null or undefined"),a(e,"<clue> is null or undefined"),b("testClue: '".concat(e.code,"'"));let r=0,s=0;return(e.parentClue?[e.parentClue].concat(e.parentClue.connectedClues):[e]).forEach(i=>{i.cells.forEach(l=>{const d=te(t,l,n);d===m.Incorrect?r+=1:d===m.Incomplete&&(s+=1)})}),r>0?m.Incorrect:s>0?m.Incomplete:m.Correct}function dt(t,e=!0){a(t,"<controller> is null or undefined");let n=0,r=0;return t.crosswordModel.cells.forEach(s=>{s.filter(o=>o.light).forEach(o=>{const i=te(t,o,e);i===m.Incorrect?n+=1:i===m.Incomplete&&(r+=1)})}),n>0?m.Incorrect:r>0?m.Incomplete:m.Correct}function at(t){a(t,"<controller> is null or undefined");let e=0,n=0;const r=!1;return t.crosswordModel.cells.find(s=>s.filter(o=>o.light).find(o=>{const i=te(t,o,r);if(i===m.Incorrect)return e=1,!0;if(i===m.Incomplete)return n=1,!0})),e>0?m.Incorrect:n>0?m.Incomplete:m.Correct}function ue(t,e,n,r){a(e&&(e.acrossClue||e.downClue),"setCellText: cell is null or not part of a clue");function s(o,i){let l=o;return l.answer=U(l.answer,i,n),r&&(l.revealed=U(l.revealed,i,n)),l}if(e.acrossClue){let o=e.acrossClue;const i=e.acrossClueLetterIndex;o=s(o,i)}if(e.downClue){let o=e.downClue;const i=e.downClueLetterIndex;o=s(o,i)}t.inputElement(e).value=n}function xe(t,e){a(t,"<controller> is null or undefined"),a(e,"<cell> is null or undefined"),ue(t,e," ",!0),M(t.incorrectElement(e))}function ht(t,e){a(t,"<controller> is null or undefined"),a(e,"<clue> is null or undefined"),b("resetClue: '".concat(e.code,"'")),(e.parentClue?[e.parentClue].concat(e.parentClue.connectedClues):[e]).forEach(r=>{r.cells.forEach(s=>{xe(t,s)})})}function Ct(t){a(t,"<controller> is null or undefined"),t.crosswordModel.cells.forEach(e=>{e.filter(n=>n.light).forEach(n=>{xe(t,n)})})}function ve(t,e){a(t,"<controller> is null or undefined"),a(e,"<cell> is null or undefined");const n=te(t,e)===m.Incorrect;n&&(ue(t,e," ",n),M(t.incorrectElement(e)))}function ft(t,e){a(t,"<controller> is null or undefined"),a(e,"<clue> is null or undefined"),b("cleanClue: '".concat(e.code,"'")),(e.parentClue?[e.parentClue].concat(e.parentClue.connectedClues):[e]).forEach(r=>{r.cells.forEach(s=>{ve(t,s)})})}function wt(t){a(t,"<controller> is null or undefined"),t.crosswordModel.cells.forEach(e=>{e.filter(n=>n.light).forEach(n=>{ve(t,n)})})}function pe(t,e){const n=e.acrossClue&&e.downClue;return n&&(t.currentClue=e.acrossClue===t.currentClue?e.downClue:e.acrossClue),n}function ye(t,e){const n=t.currentClue,o=(e.acrossClue===n?e.acrossClueLetterIndex:e.downClueLetterIndex)+1===n.cells.length&&n.nextClueSegment;return o&&(t.currentClue=n.nextClueSegment),o}function be(t,e){const n=t.currentClue,o=(e.acrossClue===n?e.acrossClueLetterIndex:e.downClueLetterIndex)-1===-1&&n.previousClueSegment;return o&&(t.currentCell=last(n.previousClueSegment.cells)),o}function mt(t,e){const{x:n,y:r}=e,{height:s}=e.model;let o=!1;return e.y+1<s&&e.model.cells[n][r+1].light===!0?(t.currentCell=e.model.cells[n][r+1],o=!0):o=ye(t,e),o}function pt(t,e){const{x:n,y:r}=e,{width:s}=e.model;let o=!1;return e.x+1<s&&e.model.cells[n+1][r].light===!0?(t.currentCell=e.model.cells[n+1][r],o=!0):o=ye(t,e),o}function gt(t,e){const{x:n,y:r}=e;let s=!1;return e.y>0&&e.model.cells[n][r-1].light===!0?(t.currentCell=e.model.cells[n][r-1],s=!0):s=be(t,e),s}function Et(t,e){const{x:n,y:r}=e;let s=!1;return e.x>0&&e.model.cells[n-1][r].light===!0?(t.currentCell=e.model.cells[n-1][r],s=!0):s=be(t,e),s}function se(t,e,n){const r=t.cell(e.target.parentNode);e.target.value=n,r.acrossClue&&(r.acrossClue.answer=U(r.acrossClue.answer,r.acrossClueLetterIndex,n)),r.downClue&&(r.downClue.answer=U(r.downClue.answer,r.downClueLetterIndex,n))}const xt=8,vt=9,yt=13,bt=37,Lt=38,It=39,St=40,$t=46,Tt=/^[A-Z]$/,At=/^[ A-Z]$/,oe=5;var A,y,P,q,k,G,I,O,B,R,K,N,j,le,Ot,W,Z,Le,E,v,D,F,_,Ie,z,Se,J,$e,Y,Te,Q,Ae,X,ke,ee,Oe;class kt{constructor(e,n,r){h(this,N);h(this,le);h(this,Z);h(this,E);h(this,D);h(this,_);h(this,z);h(this,J);h(this,Y);h(this,Q);h(this,X);h(this,ee);h(this,A,new lt);h(this,y,{clue:null,cell:null});h(this,P,Fe());h(this,q,[]);h(this,k,void 0);h(this,G,void 0);h(this,I,void 0);h(this,O,void 0);h(this,B,void 0);h(this,R,void 0);h(this,K,["cellRevealed","clueCleaned","clueReset","clueRevealed","clueSelected","clueSolved","clueTested","crosswordCleaned","crosswordReset","crosswordRevealed","crosswordSolved","crosswordTested"]);L(this,"cell",e=>u(this,A).getCell(e));L(this,"cellElement",e=>u(this,A).getCellElement(e));L(this,"inputElement",e=>this.cellElement(e).children[0]);L(this,"revealedElement",e=>{const n=e.clueLabel?2:1;return this.cellElement(e).children[n]});L(this,"incorrectElement",e=>{const n=e.clueLabel?3:2;return this.cellElement(e).children[n]});L(this,"bindEventHandlerToId",(function(e,n="click",r=document){const s=je(e,r);s&&s.addEventListener(n,this.userEventHandler(e))}).bind(this));L(this,"bindEventHandlersToIds",(function(e=this.userEventHandlerIds,n="click",r=document){e.forEach(s=>{this.bindEventHandlerToId(s,n,r)})}).bind(this));L(this,"bindEventHandlerToClass",(function(e,n="click",r=document){Pe(e,r).forEach(o=>{o.addEventListener(n,this.userEventHandler(e))})}).bind(this));L(this,"bindEventHandlersToClass",(function(e=this.userEventHandlerIds,n="click",r=document){e.forEach(s=>this.bindEventHandlerToClass(s,n,r))}).bind(this));h(this,W,(e,n)=>{e.forEach(r=>{a(this.controllerEventNames.includes(r),"addEventsListener: event [".concat(r,"] is not a CrosswordController event.")),u(this,q).push(u(this,P).subscribe(r,n))})});a(e,"CrosswordController: crosswordModel is null or undefined"),a(n,"CrosswordController: domGridParentElement is null or undefined"),S(this,I,e),S(this,O,n),S(this,B,r),S(this,k,u(this,N,j).createElement("div")),x(u(this,k),"crossword-grid"),r&&(S(this,G,C(this,_,Ie).call(this,u(this,N,j),this)),r.appendChild(u(this,G)));for(let s=0;s<u(this,I).height;s+=1)for(let o=0;o<u(this,I).width;o+=1){const i=u(this,I).cells[o][s],l=C(this,J,$e).call(this,u(this,N,j),i);u(this,k).appendChild(l),u(this,A).add(i,l)}S(this,R,{"reveal-cell":this.revealCurrentCell,"clean-clue":this.cleanCurrentClue,"reset-clue":this.resetCurrentClue,"reveal-clue":this.revealCurrentClue,"test-clue":this.testCurrentClue,"clean-crossword":this.cleanCrossword,"reset-crossword":this.resetCrossword,"reveal-crossword":this.revealCrossword,"test-crossword":this.testCrossword}),u(this,O).appendChild(this.crosswordGridView),this.currentClue=u(this,I).acrossClues[0]}destroy(){u(this,A).removeCrosswordCells(u(this,I)),u(this,O).removeChild(this.crosswordGridView),u(this,B).removeChild(this.crosswordCluesView),u(this,q).forEach(e=>{e.remove()})}userEventHandler(e){return a(u(this,R).hasOwnProperty(e),"userEventHandler: [".concat(e,"] is not a CrosswordController event handler.")),u(this,R)[e].bind(this)}get userEventHandlerIds(){return Object.keys(u(this,R))}get currentCell(){return u(this,y).cell}set currentCell(e){b("set currentCell: (".concat(e.x,",").concat(e.y,")")),e!==u(this,y).cell&&(u(this,y).cell&&C(this,ee,Oe).call(this,u(this,y).cell),u(this,y).cell=e,e==null||e.cellElement.children[0].focus(),C(this,X,ke).call(this,e))}get currentClue(){return u(this,y).clue}set currentClue(e){e!==u(this,y).clue&&(u(this,y).clue&&C(this,Q,Ae).call(this,u(this,y).clue),b("set currentClue: '".concat(e.code,"'")),u(this,y).clue=e,C(this,Y,Te).call(this,e),this.currentClue.cells.includes(this.currentCell)||(this.currentCell=this.currentClue.cells[0]),C(this,E,v).call(this,"clueSelected",e))}get crosswordModel(){return u(this,I)}get addEventsListener(){return u(this,W)}get crosswordGridView(){return u(this,k)}get crosswordCluesView(){return u(this,G)}get controllerEventNames(){return u(this,K)}testCurrentClue(){b("testCurrentClue:".concat(this.currentClue.code));const e=!0,n=ct(this,this.currentClue,e);return C(this,E,v).call(this,"clueTested",n),n===m.Correct&&setTimeout(()=>{C(this,E,v).call(this,"clueSolved",this.currentClue)},oe),n}testCrossword(){const n=dt(this,!0);return C(this,E,v).call(this,"crosswordTested",n),n===m.Correct&&setTimeout(()=>{C(this,E,v).call(this,"crosswordSolved",this.crosswordModel)},oe),n}revealCurrentCell(){ie(this,this.currentCell),C(this,E,v).call(this,"cellRevealed",this.currentCell),C(this,D,F).call(this)}revealCurrentClue(){it(this,this.currentClue),C(this,E,v).call(this,"clueRevealed",this.currentClue),C(this,D,F).call(this)}revealCrossword(){ut(this),C(this,E,v).call(this,"crosswordRevealed",this.crosswordModel)}resetCurrentClue(){ht(this,this.currentClue),C(this,E,v).call(this,"clueReset",this.currentClue)}resetCrossword(){Ct(this),C(this,E,v).call(this,"crosswordReset",this.crosswordModel)}cleanCurrentClue(){ft(this,this.currentClue),C(this,E,v).call(this,"clueCleaned",this.currentClue)}cleanCrossword(){wt(this),C(this,E,v).call(this,"crosswordCleaned",this.crosswordModel)}}A=new WeakMap,y=new WeakMap,P=new WeakMap,q=new WeakMap,k=new WeakMap,G=new WeakMap,I=new WeakMap,O=new WeakMap,B=new WeakMap,R=new WeakMap,K=new WeakMap,N=new WeakSet,j=function(){return u(this,O).ownerDocument},le=new WeakSet,Ot=function(){return u(this,N,j).defaultView},W=new WeakMap,Z=new WeakSet,Le=function(e){const n=e.acrossClue,r=e.downClue,s=this.currentClue;return this.currentClue&&(this.currentClue===n||this.currentClue===r)||(n&&!r||!n&&r?(this.currentClue=n||r,"".concat(this.currentClue===n?"across":"down"," (xor)")):n&&this.currentClue&&(n===this.currentClue.previousClueSegment||n===this.nextClueSegment)?this.currentClue=n:r&&this.currentClue&&(r===this.currentClue.previousClueSegment||r===this.nextClueSegment)?this.currentClue=r:(this.currentClue=e.downClueLetterIndex===0&&e.acrossClueLetterIndex!==0?r:n,"".concat(this.currentClue===n?"across":"down"," (first letter of down only or default across)"))),this.currentClue!==s},E=new WeakSet,v=function(e,n){u(this,P).publish(e,n)},D=new WeakSet,F=function(){at(this)===m.Correct&&setTimeout(()=>{C(this,E,v).call(this,"crosswordSolved",this.crosswordModel)},oe)},_=new WeakSet,Ie=function(e,n){a(e,"#newCrosswordCluesView: [document] is null or undefined"),a(n,"#newCrosswordCluesView: [controller] is null or undefined");function r(l,d){let w=e.createElement("div");x(w,"crossword-clue-block"),w.id=l;let p=e.createElement("p");return p.innerHTML=d,x(p,"crossword-clue-block-title"),w.appendChild(p),w}function s(l,d,w){w.forEach(p=>{let g=e.createElement("div");x(g,"crossword-clue"),g.modelClue=p;let f=e.createElement("span");x(f,"crossword-clue-label"),f.innerHTML="".concat(p.clueLabel),g.appendChild(f);let c=e.createElement("span");x(c,"crossword-clue-text"),c.innerHTML="".concat(p.clueText," ").concat(p.answerLengthText),g.appendChild(c),g.addEventListener("click",T=>{b("clue(".concat(p.clueLabel,"):click")),l.currentClue=p}),d.appendChild(g)})}function o(l){const d=n.currentClue;if(l===d)return!0;{const w=d==null?void 0:d.parentClue;return d&&w&&(w===l||w.connectedClues.indexOf(l)!==-1)}}let i={wrapper:e.createElement("div"),acrossClues:r("crossword-across-clues","Across"),downClues:r("crossword-down-clues","Down")};return x(i.wrapper,"crossword-clues"),s(n,i.acrossClues,n.crosswordModel.acrossClues),i.wrapper.appendChild(i.acrossClues),s(n,i.downClues,n.crosswordModel.downClues),i.wrapper.appendChild(i.downClues),n.addEventsListener(["clueSelected"],l=>{for(const d of i.acrossClues.children)o(d.modelClue)?x(d,"current-clue-segment"):V(d,"current-clue-segment");for(const d of i.downClues.children)o(d.modelClue)?x(d,"current-clue-segment"):V(d,"current-clue-segment")}),i.wrapper},z=new WeakSet,Se=function(e,n){const r=this;n.addEventListener("focus",s=>{var i;const o=r.cell(s.target.parentNode);C(i=r,Z,Le).call(i,o)&&C(this,E,v).call(this,"clueSelected",r.currentClue)}),n.addEventListener("click",s=>{const o=r.cell(s.target.parentNode);o===r.currentCell&&pe(r,o),r.currentCell=o}),e.addEventListener("keydown",s=>{b("event:keydown keycode=".concat(s.keyCode));const o=r.cell(s.target.parentNode),{model:i}=o;let l=r.currentClue;switch(s.keyCode){case xt:s.preventDefault(),se(r,s," "),M(r.incorrectElement(o));const w=(o.acrossClue===l?o.acrossClueLetterIndex:o.downClueLetterIndex)-1;w>=0?r.currentCell=l.cells[w]:w===-1&&l.previousClueSegment&&(r.currentCell=last(l.previousClueSegment.cells));break;case vt:s.preventDefault(),l.parentClue&&(l=l.parentClue);const p=l.isAcross?me(i.acrossClues):me(i.downClues);b("tab: across (".concat(l.isAcross,") searchClues.length (").concat(p.length,")"));let g=null;const f=p.indexOf(l);a(f!==-1,"keydown(TAB): clue '".concat(l.code,"' not found in searchClues")),s.shiftKey?f>0?g=p[f-1]:g=l.isAcross?i.downClues[i.downClues.length-1]:i.acrossClues[i.acrossClues.length-1]:f<p.length-1?g=p[f+1]:g=l.isAcross?i.downClues[0]:i.acrossClues[0],r.currentClue=g;break;case yt:s.preventDefault(),pe(r,o);break;case $t:s.preventDefault(),se(r,s," "),M(r.incorrectElement(o));break}}),e.addEventListener("keypress",s=>{s.preventDefault();const o=r.cell(s.target.parentNode),i=r.currentClue,l=String.fromCharCode(s.keyCode).toUpperCase();if(Tt.test(l)&&(se(r,s,l),M(r.incorrectElement(o)),C(this,D,F).call(this)),At.test(l)){const w=(o.acrossClue===i?o.acrossClueLetterIndex:o.downClueLetterIndex)+1;w<i.cells.length?r.currentCell=i.cells[w]:i.nextClueSegment&&(r.currentClue=i.nextClueSegment)}}),e.addEventListener("keyup",s=>{const o=r.cell(s.target.parentNode);switch(s.keyCode){case bt:Et(r,o);break;case Lt:gt(r,o);break;case It:pt(r,o);break;case St:mt(r,o);break}})},J=new WeakSet,$e=function(e,n){const r=e.createElement("div");if(x(r,"cwcell"),n.cellElement=r,x(r,n.light?"light":"dark"),!n.light)return r;const s=e.createElement("input");if(s.maxLength=1,n.answer&&(s.value=n.answer),r.appendChild(s),n.clueLabel){const l=e.createElement("div");x(l,"cwclue-label"),l.innerHTML=n.clueLabel,r.appendChild(l)}const o=e.createElement("div");Ce(o,["cwcell-revealed","hidden"]),r.appendChild(o);const i=e.createElement("div");return Ce(i,["cwcell-incorrect","hidden"]),r.appendChild(i),",-".includes(n.acrossTerminator)?x(s,"cw-across-word-separator"):",-".includes(n.downTerminator)&&x(s,"cw-down-word-separator"),C(this,z,Se).call(this,r,s),r},Y=new WeakSet,Te=function(e){(e.parentClue?[e.parentClue].concat(e.parentClue.connectedClues):[e]).forEach(r=>{r.cells.forEach(s=>{x(this.inputElement(s),"active")})})},Q=new WeakSet,Ae=function(e){(e.parentClue?[e.parentClue].concat(e.parentClue.connectedClues):[e]).forEach(r=>{r.cells.forEach(s=>{V(this.inputElement(s),"active")})})},X=new WeakSet,ke=function(e){a(e,"#highLightCell: cell is undefined"),x(this.inputElement(e),"highlighted")},ee=new WeakSet,Oe=function(e){a(e,"#deHighLightCell: cell is undefined"),V(this.inputElement(e),"highlighted")};const ce={compileCrossword:ot,Controller:kt};typeof window<"u"&&(window.CrosswordsJS=ce);document.querySelector("#app").innerHTML='<div class="crossword"></div><div class="down-clues"></div> ';let de;try{de=ce.compileCrossword({info:{source:"https://www.fifteensquared.net/2022/05/16/financial-times-17095-by-alberich/",title:"Financial Times 17,095",setter:{title:"Alberich",url:"https://www.fifteensquared.net/2022/05/16/financial-times-17095-by-alberich/"}},width:15,height:15,acrossClues:[{x:1,y:1,clue:"1. Married woman shows animosity (6)",solution:"MALICE",answer:"wotcha"},{x:8,y:1,clue:"4. One's held back by a stout grating (8)",solution:"ABRASIVE",answer:"abraXive"},{x:1,y:3,clue:"10. Out of gas, grateful for a quantity of it (7)",solution:"TANKFUL"},{x:9,y:3,clue:"11. Weapon caused injury to young woman (7)",solution:"CUTLASS"},{x:1,y:5,clue:"12. One in bar may have one for it? (4)",solution:"ROAD"},{x:6,y:5,clue:"13. Woman who suffered capital loss in Lebanon, beaten by fluctuating yen (4,6)",solution:"ANNE BOLEYN"},{x:1,y:7,clue:"15. Start as home counties solicitor (3,3)",solution:"SET OUT"},{x:8,y:7,clue:"16. Officer without company is beset by depression (7)",solution:"COLONEL"},{x:2,y:9,clue:"20. Runs into shy university teacher in London borough (7)",solution:"CROYDON"},{x:10,y:9,clue:"21. Supply outstanding artwork (6)",solution:"RELIEF"},{x:1,y:11,clue:"24. Generous Alberich awkwardly accepts thanks (10)",solution:"CHARITABLE"},{x:12,y:11,clue:"26. French bread? (4)",solution:"EURO"},{x:1,y:13,clue:"28. Sick joke finally gets girl banned (7)",solution:"ILLEGAL"},{x:9,y:13,clue:"29. Southern climate's not hot - so wear this? (7)",solution:"SWEATER"},{x:1,y:15,clue:"30. Old lady faces adversity, ignoring the odds - most impressive (8)",solution:"GRANDEST"},{x:10,y:15,clue:"31. Cheese's said to give one wind (6)",solution:"BREEZE"}],downClues:[{x:1,y:1,clue:"1. Ordered risotto after introduction to Minnie Driver (8)",solution:"MOTORIST",answer:"woctopus"},{x:3,y:1,clue:"2. City thrashed Real, having engaged new players (9)",solution:"LANCASTER"},{x:5,y:1,clue:"3. Caught university fellows with blow (4)",solution:"CUFF"},{x:9,y:1,clue:"5. He will have education to a degree (8)",solution:"BACHELOR"},{x:11,y:1,clue:"6. Scientist whose study involves moon, star and heart of asteroid? (10)",solution:"ASTRONOMER"},{x:13,y:1,clue:"7. I am taking a long time to create public persona (5)",solution:"IMAGE"},{x:15,y:1,clue:"8. Religious ascetic from German city beginning to evangelise (6)",solution:"ESSENE"},{x:7,y:2,clue:"9. Frank's lacking a point (5)",solution:"BLUNT"},{x:5,y:6,clue:"14.  Improvised explanation of unfair trial? (4-6)",solution:"JURY RIGGED"},{x:13,y:7,clue:"17.  Content of letter must follow quite ridiculous protocol (9)",solution:"ETIQUETTE"},{x:7,y:8,clue:"18.  Company moves fast across lake in rowing boats (8)",solution:"CORACLES"},{x:15,y:8,clue:"19.  Naturally I must escape from ferocious bats (2,6)",solution:"OF COURSE"},{x:1,y:10,clue:"22.  Timeless longing to find old Chinese text (1,5)",solution:"I CHING"},{x:9,y:10,clue:"23.  Rich, even when penniless? (5)",solution:"PLUSH"},{x:3,y:11,clue:"25.  Somewhat irrational loathing for Scottish town (5)",solution:"ALLOA"},{x:11,y:12,clue:"27.  A drop in rent (4)",solution:"TEAR"}]})}catch(t){console.log("Error compiling crossword: ".concat(t))}new ce.Controller(de,document.querySelector(".crossword"));de.downClues.forEach(t=>{let e=document.createElement("div");e.innerHTML="".concat(t.clueLabel," ").concat(t.clueText," ").concat(t.answerLengthText),document.querySelector(".down-clues").appendChild(e)});export{Nt as __vite_legacy_guard};
